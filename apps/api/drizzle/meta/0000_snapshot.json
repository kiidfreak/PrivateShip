{
  "id": "23b6b887-3829-4530-8296-3a6750f1510c",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.identity_commitments": {
      "name": "identity_commitments",
      "schema": "",
      "columns": {
        "commitment_id": {
          "name": "commitment_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "commitment_hash": {
          "name": "commitment_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "phone_hash": {
          "name": "phone_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "id_number_hash": {
          "name": "id_number_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "verification_tier": {
          "name": "verification_tier",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "midnight_anchor_tx": {
          "name": "midnight_anchor_tx",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "identity_commitments_user_id_unique": {
          "name": "identity_commitments_user_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "user_id"
          ]
        },
        "identity_commitments_phone_hash_unique": {
          "name": "identity_commitments_phone_hash_unique",
          "nullsNotDistinct": false,
          "columns": [
            "phone_hash"
          ]
        },
        "identity_commitments_id_number_hash_unique": {
          "name": "identity_commitments_id_number_hash_unique",
          "nullsNotDistinct": false,
          "columns": [
            "id_number_hash"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.proofs": {
      "name": "proofs",
      "schema": "",
      "columns": {
        "proof_id": {
          "name": "proof_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "commitment_id": {
          "name": "commitment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "proof_type": {
          "name": "proof_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "proof_data": {
          "name": "proof_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "generated_at": {
          "name": "generated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "used_count": {
          "name": "used_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "midnight_tx_hash": {
          "name": "midnight_tx_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "proofs_commitment_id_identity_commitments_commitment_id_fk": {
          "name": "proofs_commitment_id_identity_commitments_commitment_id_fk",
          "tableFrom": "proofs",
          "tableTo": "identity_commitments",
          "columnsFrom": [
            "commitment_id"
          ],
          "columnsTo": [
            "commitment_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.trust_state": {
      "name": "trust_state",
      "schema": "",
      "columns": {
        "commitment_id": {
          "name": "commitment_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "trust_score": {
          "name": "trust_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "fraud_flags": {
          "name": "fraud_flags",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "account_age_days": {
          "name": "account_age_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "identity_stable": {
          "name": "identity_stable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "last_activity_at": {
          "name": "last_activity_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "risk_level": {
          "name": "risk_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "score_updated_at": {
          "name": "score_updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "trust_state_commitment_id_identity_commitments_commitment_id_fk": {
          "name": "trust_state_commitment_id_identity_commitments_commitment_id_fk",
          "tableFrom": "trust_state",
          "tableTo": "identity_commitments",
          "columnsFrom": [
            "commitment_id"
          ],
          "columnsTo": [
            "commitment_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.verification_events": {
      "name": "verification_events",
      "schema": "",
      "columns": {
        "event_id": {
          "name": "event_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "commitment_id": {
          "name": "commitment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "event_data": {
          "name": "event_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "ip_hash": {
          "name": "ip_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_fingerprint_hash": {
          "name": "device_fingerprint_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "verification_events_commitment_id_identity_commitments_commitment_id_fk": {
          "name": "verification_events_commitment_id_identity_commitments_commitment_id_fk",
          "tableFrom": "verification_events",
          "tableTo": "identity_commitments",
          "columnsFrom": [
            "commitment_id"
          ],
          "columnsTo": [
            "commitment_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}